"use strict";var a,myForm=document.querySelector("#form"),topic=myForm.querySelector(".form__input"),textarea=myForm.querySelector(".form__textarea"),hour=myForm.querySelector(".form__select_hour"),noteList=document.querySelector(".note__list"),cardsData=[],min=myForm.querySelector(".form__select_second_hour"),checkBtn=myForm.querySelector(".form__checkbox"),dataBtns=document.querySelector(".data__buttons"),formCancel=document.querySelector(".form__cancel_button");function addNewNote(e){saveFormValue(e),createCard(e)}function deleteNote(){var e=Array.from(noteList.children).indexOf(this.parentElement);cardsData.splice(e,1),noteList.removeChild(this.parentElement),localStorage.setItem("data",JSON.stringify(cardsData))}formCancel.addEventListener("click",function(){myForm.classList.remove("active_section"),myForm.classList.remove("section_opacity"),dateDesc.classList.add("active_section"),setTimeout(function(){dateDesc.classList.add("section_opacity")},30),dataBtns.style.display="flex"}),localStorage.getItem("data")&&(cardsData=JSON.parse(localStorage.getItem("data"))),myForm.addEventListener("submit",function(e){e.preventDefault();var t={},a=topic.value,n=textarea.value,r=hour.value,o=min.value,s=checkBtn.checked;t.id=dateNumber.textContent+"."+dateMounthName.textContent,t.isTopic=a,t.text=n,t.hour=r,t.min=o,t.importance=s,addNewNote(t),topic.value="",textarea.value="",hour.value=1,min.value=10,checkBtn.checked=!1,dataBtns.style.display="flex",myForm.classList.remove("active_section"),myForm.classList.remove("section_opacity"),dateDesc.classList.add("active_section"),setTimeout(function(){dateDesc.classList.add("section_opacity")},30),setRecordsClass()});var saveFormValue=function(e){cardsData.push(e),localStorage.setItem("data",JSON.stringify(cardsData))},makeElement=function(e,t,a){var n=document.createElement(e);return n.classList.add(t),a&&(n.textContent=a),n};function setCreateCard(e,t){var a=noteList.children;if(cardsData.length)for(var n=0;n<cardsData.length;n++)createCard(cardsData[n]),a[n].style.display="none",a[n].classList.remove("note__item_open"),cardsData[n].id==e.textContent+"."+t.textContent&&(a[n].style.display="flex",a[n].classList.add("note__item_open"))}var prevBtn,nextBtn,daysNameTitle,daysLinkText,daysLink,d,createCard=function(e){var t=makeElement("li","note__item"),a=makeElement("div","note__info");t.appendChild(a);var n=makeElement("div","note__topic",e.isTopic);a.appendChild(n);var r=makeElement("div","note__time");a.appendChild(r);var o=makeElement("p","hour",e.hour+" in ");r.appendChild(o);var s=makeElement("p","min",e.min);r.appendChild(s);var c=makeElement("div","note__main");if(e.text){t.appendChild(c);var i=makeElement("button","note__main_close_btn","Х");i.addEventListener("click",function(){var e=this.parentElement;e.classList.remove("note__main_open"),e.classList.add("note__main"),i.style.display="none"});var d=makeElement("p","note__main_text",e.text);d.addEventListener("click",function(){var e=this.parentElement;e.classList.add("note__main_open"),e.classList.remove("note__main"),i.style.display="block"}),c.appendChild(d),c.appendChild(i)}else c.textContent="No entry",c.style.cursor="no-drop",t.appendChild(c);if(e.importance){var l=makeElement("div","note__important_entry","Important!");t.appendChild(l),noteList.prepend(t)}var m=makeElement("button","note_edit__btn",". . .");m.addEventListener("click",editNote),t.appendChild(m);var u=makeElement("button","note_delete__btn","х");u.addEventListener("click",deleteNote),t.appendChild(u),noteList.appendChild(t)},date=new Date,mounthArr=["January","February","March","April","May","June","July","August","September","October","November","December"],daysName=["mon","tues","wed","thurs","fri","sat","sun"],year=date.getFullYear(),mounth=date.getMonth(),day=date.getDate(),indexMounth=0,indexDay=0;function createCalendar(e,t,a){var n=document.getElementById(e);prevBtn=makeElement("button","prev__btn","<< prev"),n.appendChild(prevBtn),nextBtn=makeElement("button","next__btn","next >>"),n.appendChild(nextBtn);var r=makeElement("ul","calendar__list");n.appendChild(r);for(var o=0;o<mounthArr.length;o++){d=new Date(t,o);var s=makeElement("li","calendar__item");r.appendChild(s);var c=makeElement("div","calendar__desc");s.appendChild(c);var i=makeElement("h1","calendar__title",mounthArr[o]);c.appendChild(i);var l=makeElement("ul","days__name_list");c.appendChild(l);for(var m=0;m<daysName.length;m++){var u=makeElement("li","days__name_item");l.appendChild(u),daysNameTitle=makeElement("p","days__name_title",daysName[m]),u.appendChild(daysNameTitle)}var _=makeElement("ul","days__list");c.appendChild(_);for(var y=1;y<=getDay(d);y++){var v=makeElement("li","days__item");_.appendChild(v)}for(;d.getMonth()==o;){var h=makeElement("li","days__item");_.appendChild(h),daysLink=makeElement("a","days__link",d.getDate()),d.getDate()<10&&(daysLink.textContent="0"+d.getDate()),daysLink.addEventListener("click",openData),day==daysLink.textContent&&d.getMonth()==mounth&&daysLink.classList.add("current__day"),h.appendChild(daysLink),d.setDate(d.getDate()+1)}}}function getData(e){dateNumber.textContent=e,dateDayName.textContent=getDayOfWeek(firstDayMounth,e),dateMounthName.textContent=getMonthName()}function openData(e){getData(this.textContent),setCreateCard(dateNumber,dateMounthName),calendarData.classList.toggle("active_section"),setTimeout(function(){calendarData.classList.toggle("section_opacity")},30),indexDay=this.parentElement}function getDay(e){var t=e.getDay();return 0==t&&(t=7),t-1}createCalendar("calendar",year,mounth);var step,list,recorsDay,calendarList=document.querySelector(".calendar__list"),calendarItem=calendarList.children,currentMounth=mounth,firstDayMounth=currentMounth;function setRecordsClass(){for(var e=0;e<mounthArr.length;e++)for(var t=0;t<cardsData.length;t++)if(mounthArr[e].includes(cardsData[t].id.substring(3))){list=calendarItem[e].querySelector(".days__list"),recorsDay=list.querySelectorAll(".days__link");for(var a=0;a<recorsDay.length;a++)recorsDay[a].textContent+"."+mounthArr[e]==cardsData[t].id&&recorsDay[a].parentElement.classList.add("records")}}function getMonthName(){dateMounthName.textContent;for(var e=0;e<calendarItem.length;e++)if(calendarItem[e].classList.contains("activeMounth"))return mounthArr[indexMounth=e]}function getDayOfWeek(e,t){var a=(Number(e)+Number(t)-1)%7;return daysName[a]}setRecordsClass(),calendarList.style.transform="translate(-"+100*currentMounth+"%)",calendarItem[currentMounth].classList.add("activeMounth"),prevBtn.addEventListener("click",function(e){--currentMounth,firstDayMounth=getDay(new Date(year,currentMounth));var t=currentMounth+1;currentMounth<0&&(currentMounth=calendarItem.length-1,calendarItem[currentMounth].classList.add("activeMounth")),step=100*currentMounth,calendarList.style.transform="translate(-"+step+"%)",calendarItem[t].classList.remove("activeMounth"),calendarItem[currentMounth].classList.add("activeMounth")}),nextBtn.addEventListener("click",function(e){currentMounth+=1,firstDayMounth=getDay(new Date(year,currentMounth));var t=currentMounth-1;currentMounth>calendarItem.length-1&&(currentMounth=0,calendarItem[calendarItem.length-1].classList.remove("activeMounth"),calendarItem[currentMounth].classList.add("activeMounth")),step=100*currentMounth,calendarList.style.transform="translate(-"+step+"%)",calendarItem[t].classList.remove("activeMounth"),calendarItem[currentMounth].classList.add("activeMounth")});var calendarData=document.querySelector(".calendar__data"),dateNumber=document.querySelector(".date__number"),dateMounthName=document.querySelector(".date__mounth_name"),dateDayName=document.querySelector(".date__day_name"),dateDesc=document.querySelector(".date__desc"),openFormBtn=document.querySelector(".open__form"),closeDataBtn=document.querySelector(".data__close"),dateForm=document.querySelector(".date__form");function editNote(){dateDesc.classList.remove("active_section"),dateDesc.classList.remove("section_opacity"),myForm.classList.add("active_section"),setTimeout(function(){myForm.classList.add("section_opacity")},30),dataBtns.style.display="none",console.log(this.parentElement)}dateDesc.classList.add("active_section"),setTimeout(function(){dateDesc.classList.add("section_opacity")},30),openFormBtn.addEventListener("click",function(){dateDesc.classList.remove("active_section"),dateDesc.classList.remove("section_opacity"),myForm.classList.add("active_section"),setTimeout(function(){myForm.classList.add("section_opacity")},30),dataBtns.style.display="none"}),closeDataBtn.addEventListener("click",function(){myForm.classList.remove("active_section"),myForm.classList.remove("section_opacity"),calendarData.classList.remove("active_section"),calendarData.classList.remove("section_opacity"),dateDesc.classList.add("active_section"),setTimeout(function(){dateDesc.classList.add("section_opacity")},30);var e=noteList.querySelectorAll(".note__item");if(e)for(var t=0;t<e.length;t++)e[t].remove()});var navItems=document.querySelectorAll(".header_nav__item"),sections=document.querySelectorAll(".section"),activeSection=document.getElementsByClassName("active_section"),opacitySection=document.getElementsByClassName("section_opacity"),homePageBtn=document.querySelectorAll(".nav__link"),getElement=function(e){e.forEach(function(a){a.addEventListener("click",function(e){e.preventDefault();var t=a.dataset.name;toggleClass(t)})})},toggleClass=function(a){sections.forEach(function(e){var t=e.dataset.name;a==t&&(0<activeSection.length&&activeSection[0]!==e&&(activeSection[0].classList.remove("active_section"),opacitySection[0].classList.remove("section_opacity")),e.classList.add("active_section"),setTimeout(function(){e.classList.add("section_opacity")},30))})};getElement(navItems),getElement(homePageBtn);